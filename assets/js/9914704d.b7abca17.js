"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2327],{5537:(e,n,r)=>{r.d(n,{A:()=>w});var t=r(6540),a=r(8215),s=r(5627),i=r(6347),o=r(372),l=r(604),c=r(1861),d=r(8749);function u(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:r}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:r,attributes:t,default:a}}=e;return{value:n,label:r,attributes:t,default:a}}))}(r);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function m(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:r}=e;const a=(0,i.W6)(),s=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,l.aZ)(s),(0,t.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(a.location.search);n.set(s,e),a.replace({...a.location,search:n.toString()})}),[s,a])]}function f(e){const{defaultValue:n,queryString:r=!1,groupId:a}=e,s=h(e),[i,l]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=r.find((e=>e.default))??r[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s}))),[c,u]=p({queryString:r,groupId:a}),[f,g]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,s]=(0,d.Dv)(r);return[a,(0,t.useCallback)((e=>{r&&s.set(e)}),[r,s])]}({groupId:a}),x=(()=>{const e=c??f;return m({value:e,tabValues:s})?e:null})();(0,o.A)((()=>{x&&l(x)}),[x]);return{selectedValue:i,selectValue:(0,t.useCallback)((e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),g(e)}),[u,g,s]),tabValues:s}}var g=r(9136);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=r(4848);function j(e){let{className:n,block:r,selectedValue:t,selectValue:i,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),d=e=>{const n=e.currentTarget,r=l.indexOf(n),a=o[r].value;a!==t&&(c(n),i(a))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const r=l.indexOf(e.currentTarget)+1;n=l[r]??l[0];break}case"ArrowLeft":{const r=l.indexOf(e.currentTarget)-1;n=l[r]??l[l.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":r},n),children:o.map((e=>{let{value:n,label:r,attributes:s}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>{l.push(e)},onKeyDown:u,onClick:d,...s,className:(0,a.A)("tabs__item",x.tabItem,s?.className,{"tabs__item--active":t===n}),children:r??n},n)}))})}function v(e){let{lazy:n,children:r,selectedValue:s}=e;const i=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===s));return e?(0,t.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function y(e){const n=f(e);return(0,b.jsxs)("div",{className:(0,a.A)("tabs-container",x.tabList),children:[(0,b.jsx)(j,{...n,...e}),(0,b.jsx)(v,{...n,...e})]})}function w(e){const n=(0,g.A)();return(0,b.jsx)(y,{...e,children:u(e.children)},String(n))}},6519:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"examples/guides/camera-streamer","title":"CameraStreamer component","description":"AICA\'s core-vision package includes, among others, the CameraStreamer component that can read image streams from","source":"@site/docs/examples/guides/camera-streamer.md","sourceDirName":"examples/guides","slug":"/examples/guides/camera-streamer","permalink":"/docs/examples/guides/camera-streamer","draft":false,"unlisted":false,"editUrl":"https://github.com/aica-technology/api/tree/main/docs/docs/examples/guides/camera-streamer.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12,"title":"CameraStreamer component"},"sidebar":"examplesSidebar","previous":{"title":"Using Isaac Lab as a simulator","permalink":"/docs/examples/guides/isaaclab-aica-bridge"},"next":{"title":"Camera calibration","permalink":"/docs/examples/guides/camera-calibration"}}');var a=r(4848),s=r(8453);r(5537),r(9329);const i=r.p+"assets/images/camera-streamer-example-3e649b8e4ae97956abb02363ca19256b.png",o={sidebar_position:12,title:"CameraStreamer component"},l="CameraStreamer component",c={},d=[{value:"AICA Launcher configuration",id:"aica-launcher-configuration",level:2},{value:"Using the CameraStreamer",id:"using-the-camerastreamer",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"camerastreamer-component",children:"CameraStreamer component"})}),"\n",(0,a.jsxs)(n.p,{children:["AICA's ",(0,a.jsx)(n.code,{children:"core-vision"})," package includes, among others, the ",(0,a.jsx)(n.code,{children:"CameraStreamer"})," component that can read image streams from\nUSB devices, network streams, or video files. Most of the standard consumer-grade webcams and video formats are\nsupported out-of-the-box."]}),"\n",(0,a.jsx)(n.p,{children:"This guide shows the basics on how to use the component with a camera."}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsx)(n.p,{children:"Working with a video file or network stream is also possible by providing the filepath or network address instead\nof a camera device."})}),"\n",(0,a.jsx)(n.h2,{id:"aica-launcher-configuration",children:"AICA Launcher configuration"}),"\n",(0,a.jsxs)(n.p,{children:["Start AICA Launcher, select AICA Core v4.4.2 or higher, and add the ",(0,a.jsx)(n.code,{children:"core-vision"})," package to your configuration."]}),"\n",(0,a.jsxs)(n.p,{children:["Select ",(0,a.jsx)(n.strong,{children:"Launch AICA Studio"})," to proceed."]}),"\n",(0,a.jsx)(n.h2,{id:"using-the-camerastreamer",children:"Using the CameraStreamer"}),"\n",(0,a.jsx)(n.p,{children:"Start by creating a new application."}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Remove the hardware interface that is included in new applications by default."}),"\n",(0,a.jsxs)(n.li,{children:["From the ",(0,a.jsx)(n.code,{children:"Scene"})," menu, use the ",(0,a.jsx)(n.code,{children:"Add Component"})," tab and look for the ",(0,a.jsx)(n.strong,{children:"Camera Streamer"})," component either by searching\nor by manually going under the ",(0,a.jsx)(n.code,{children:"Core Vision Components"})," menu. Click to add it to the graph."]}),"\n",(0,a.jsx)(n.li,{children:"Next, connect the component to the start block."}),"\n",(0,a.jsxs)(n.li,{children:["Enable ",(0,a.jsx)(n.strong,{children:"auto-configure"})," and ",(0,a.jsx)(n.strong,{children:"auto-activate"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["With your new component selected, make sure you are in the ",(0,a.jsx)(n.code,{children:"Scene"})," menu, where you may find all the available\ncomponent parameters."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"By this point, you should have something like the following:"}),"\n",(0,a.jsx)("div",{class:"text--center",children:(0,a.jsx)("img",{src:i,alt:"Default CameraStreamer configuration"})}),"\n",(0,a.jsx)(n.p,{children:"Before pressing play, let us go through the parameters first. You should see:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Rate"}),": This is the component's rate, but it has no effect on the operation of ",(0,a.jsx)(n.code,{children:"CameraStreamer"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Source"}),": Path to the source device or video file. If using a camera, this is typically of the form ",(0,a.jsx)(n.code,{children:"/dev/videoX"}),",\nwhereas for video files you need to provide the absolute path to the video, e.g., ",(0,a.jsx)(n.code,{children:"/path/to/video"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Camera frame"}),": The reference frame that will be used when publishing image messages, which should correspond the\ncamera's sensor position."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Camera configuration"}),": A YAML-formatted camera configuration file containing the camera intrinsics (optional). If\nyou don't have a calibration file for your camera, you can follow our ",(0,a.jsx)(n.a,{href:"/docs/examples/guides/camera-calibration",children:"calibration guide"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Frame width"}),": The desired image width."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Frame height"}),": The desired image height."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Frame rate"}),": The desired frame rate for image streaming."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Crop undistorted image"}),": If a camera configuration file is available, this option indicates whether black-pixel\nregions created at the edges of the image post-undistortion should be cropped. Mind that this also crops part of the\nimage that contains usable pixels."]}),"\n"]}),"\n",(0,a.jsxs)(n.admonition,{type:"info",children:[(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.strong,{children:"image width and height"})," are not used to resize an existing stream. In the case of camera devices, they will act\nas desired dimensions, but the component will fail to configure if they are not supported. For videos, the native\nresolution should be set."]}),(0,a.jsxs)(n.p,{children:["Similarly, the ",(0,a.jsx)(n.strong,{children:"frame rate"})," is also a request and will cause the component to fail configuration if the value\nrequested is not supported."]})]}),"\n",(0,a.jsxs)(n.admonition,{type:"tip",children:[(0,a.jsxs)(n.p,{children:["In newer versions of ",(0,a.jsx)(n.code,{children:"CameraStreamer"})," you will also have access to:"]}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Stream encoding"}),": Sets the output encoding of the image stream."]}),"\n"]})]}),"\n",(0,a.jsxs)(n.p,{children:["Once you have selected an appropriate ",(0,a.jsx)(n.strong,{children:"source"}),":"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Press ",(0,a.jsx)(n.strong,{children:"Play"})," to start the application."]}),"\n",(0,a.jsxs)(n.li,{children:["To see the live camera feed, click on the gear icon on the bottom right and select ",(0,a.jsx)(n.strong,{children:"Launch RViz"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["In RViz, select ",(0,a.jsx)(n.em,{children:"Add > By topic > /camera_streamer/image > Image"}),". This adds a panel that shows the live image. The\nundistorted image (if available) can also be found under ",(0,a.jsx)(n.em,{children:"/camera_streamer/undistorted_image > Image"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"Steps 2 and 3 are only available on Linux as they require Docker to forward graphics to the host machine. However, you\nshould still be able to create image streams with connected devices for further use in your application graph."})}),"\n",(0,a.jsx)(n.p,{children:"You may use the following YAML snippet containing the full application:"}),"\n",(0,a.jsxs)(r,{children:[(0,a.jsx)("summary",{children:"Application YAML"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"schema: 2-0-4\ndependencies:\n  core: v4.4.2\non_start:\n  load:\n    component: camera_streamer\ncomponents:\n  camera_streamer:\n    component: core_vision_components::image_streaming::CameraStreamer\n    display_name: Camera Streamer\n    events:\n      transitions:\n        on_load:\n          lifecycle:\n            component: camera_streamer\n            transition: configure\n        on_configure:\n          lifecycle:\n            component: camera_streamer\n            transition: activate\ngraph:\n  positions:\n    components:\n      camera_streamer:\n        x: 280\n        y: -20\n"})})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>o});var t=r(6540);const a={},s=t.createContext(a);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(s.Provider,{value:n},e.children)}},9329:(e,n,r)=>{r.d(n,{A:()=>i});r(6540);var t=r(8215);const a={tabItem:"tabItem_Ymn6"};var s=r(4848);function i(e){let{children:n,hidden:r,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,t.A)(a.tabItem,i),hidden:r,children:n})}}}]);