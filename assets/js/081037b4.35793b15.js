"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1816],{815:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>f,contentTitle:()=>b,default:()=>_,frontMatter:()=>g,metadata:()=>t,toc:()=>w});const t=JSON.parse('{"id":"examples/guides/ur-harware-interface","title":"Universal Robots","description":"Universal Robots (UR) offers a range of collaborative robotic arms in different sizes and with different payloads that","source":"@site/core_versioned_docs/version-v4/examples/guides/ur-harware-interface.md","sourceDirName":"examples/guides","slug":"/examples/guides/ur-harware-interface","permalink":"/core/v4/examples/guides/ur-harware-interface","draft":false,"unlisted":false,"editUrl":"https://github.com/aica-technology/api/tree/main/docs/core_versioned_docs/version-v4/examples/guides/ur-harware-interface.md","tags":[],"version":"v4","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"Universal Robots"},"sidebar":"examplesSidebar","previous":{"title":"Orbbec camera component","permalink":"/core/v4/examples/guides/orbbec-component"},"next":{"title":"URSim guide","permalink":"/core/v4/examples/guides/ur-sim-guide"}}');var o=r(4848),a=r(8453);const s=r.p+"assets/images/ur-hwi-studio-47de60082066e33cd3d081b44570d5d3.png",i=r.p+"assets/images/ur-hwi-switch-mode-66054831a48cb52faf7a778d4b03f1a9.gif",l="data:image/png;base64,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",c=r.p+"assets/images/ur-hwi-remote-example-70e9e88f234e08c67b7d96735b4cbeae.gif",d=(r.p,r.p+"assets/images/ur-hwi-sequence-running-4ba2eda694e496a9d423e91359ae26c8.gif"),h=r.p+"assets/images/ur-hwi-hand-guiding-params-3c73667d72c5095e0fcb00bbd4c446af.png",p=r.p+"assets/images/ur-hwi-networking-settings-43bee0edbf7cd9fdcbe73339193f84b2.png",u=r.p+"assets/images/ur-hwi-ur-program-4b48a6d562db15a631169bee89e8bbd8.png",m=r.p+"assets/images/ur-dashboard-controller-dbaf643b1455a0c7a4142c2221b88a23.png",x=r.p+"assets/images/ur-hwi-impedance-controller-b1fe7d444b6840c1b5b79422af410473.png",g={sidebar_position:8,title:"Universal Robots"},b="Universal Robots",f={},w=[{value:"Local and Remote Control",id:"local-and-remote-control",level:2},{value:"Full control of the robot from an AICA application",id:"full-control-of-the-robot-from-an-aica-application",level:3},{value:"Run an AICA application as one node of a program",id:"run-an-aica-application-as-one-node-of-a-program",level:3},{value:"Dashboard controller",id:"dashboard-controller",level:2},{value:"Force Mode",id:"force-mode",level:2},{value:"Impedance controller",id:"impedance-controller",level:3},{value:"Hand Guiding controller",id:"hand-guiding-controller",level:3}];function j(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"universal-robots",children:"Universal Robots"})}),"\n",(0,o.jsx)(n.p,{children:"Universal Robots (UR) offers a range of collaborative robotic arms in different sizes and with different payloads that\nare widely adopted across industries and research for their accessibility and flexibility. A graphical interface on the\nteach pendant allows to easily and intuitively program and integrate UR robots. At the same time, advanced users can get\naccess to the full capabilities of the manipulators through scripting in URScript language or even by developing\nsoftware add-ons, so-called URCaps."}),"\n",(0,o.jsx)(n.p,{children:"The ecosystem around UR robots is highly developer-friendly, with open-source communication libraries, drivers,\ndocumentation, and integration support for frameworks such as ROS. Additionally, their simulation tool URSim allows\ndevelopers to test and validate robot programs and interfaces without needing access to physical hardware and makes\nUR a popular choice building custom applications."}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["A guide on installing and running URSim can be found on ",(0,o.jsx)(n.a,{href:"./ur-sim-guide",children:"this page"}),"."]})}),"\n",(0,o.jsx)(n.p,{children:"Due to the reasons mentioned above, UR manipulators are often used for prototyping at AICA and have seen extensive\ninternal development for robot-specific feature integration. The UR hardware collection provided by AICA comes with\nspecial tools and functionalities that are unique to UR robots. This guide intends to explain these concepts and how\nthey can be leveraged in AICA Studio."}),"\n",(0,o.jsxs)(n.p,{children:["To use the UR collection, add the latest version of ",(0,o.jsx)(n.code,{children:"collections/ur-collection"})," to your configuration in AICA Launcher.\nDoing this will add multiple new hardware examples as well as a few controllers to AICA Studio. All UR robots share the\nsame hardware interface in AICA Studio. The hardware interface has quite a large number of parameters, most of which are\nnot important for regular use cases."]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"For best results with a UR robot, always set the rate of the hardware interface to 500 Hertz, which corresponds to the\ncontrol rate of the real hardware."})}),"\n",(0,o.jsx)("div",{class:"text--center",children:(0,o.jsx)("img",{src:s,alt:"UR Hardware Interface in AICA Studio"})}),"\n",(0,o.jsx)(n.h2,{id:"local-and-remote-control",children:"Local and Remote Control"}),"\n",(0,o.jsxs)(n.p,{children:["The concept of Local and Remote Control on PolyScope can be easiest explained by introducing a ",(0,o.jsx)(n.em,{children:"primary"})," and ",(0,o.jsx)(n.em,{children:"secondary"}),"\ndevice architecture. In Local Control, the controller is the ",(0,o.jsx)(n.em,{children:"primary"})," and has full authority on loading and starting\nprograms. In other words, the robot has to be used in person through the teach pendant and any commands sent from an\nexternal source will be rejected. On the other hand, Remote Control allows to control the robot via external sources,\nsuch as sockets, I/Os and the Dashboard Server. In this case, the controller is the ",(0,o.jsx)(n.em,{children:"secondary"})," and external sources can\nload and start programs or directly send URScript commands to the controller."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"Safety features remain active in Remote Control."})}),"\n",(0,o.jsx)(n.p,{children:"Choosing one of the two modes depends on the specific task at hand. During a development phase, it might be preferable\nto create the programs in Local Mode, whereas in a production setting, PLCs would be responsible to load and start the\ndesired programs while the robot is in Remote Control. With the AICA System, users have the chance to get the best\nof both modes:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Take full control of the robot from an AICA application (requires Remote Control)"}),"\n",(0,o.jsx)(n.li,{children:"Run an AICA application as one node of a program (works in both Local and Remote Control)"}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["The two examples below work out of the box with the ",(0,o.jsx)(n.a,{href:"./ur-sim-guide#installation",children:"URSim"}),"."]})}),"\n",(0,o.jsx)(n.h3,{id:"full-control-of-the-robot-from-an-aica-application",children:"Full control of the robot from an AICA application"}),"\n",(0,o.jsx)(n.p,{children:"For this first case, no additional installation steps are required. The robot becomes the secondary device and all\nmotions are coordinated through AICA Studio. Apart from setting the correct robot IP in the hardware interface, two\nrequirements have to be met:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["On the robot, Remote Control has to be activated. For that, first activate Remote Control in the system settings as\nexplained ",(0,o.jsx)(n.a,{href:"./ur-sim-guide#accessing-and-configuring-the-simulated-robot",children:"here"}),", then switch from ",(0,o.jsx)(n.em,{children:"Local"})," to\n",(0,o.jsx)(n.em,{children:"Remote"})," mode on the top right corner of the teach pendant. The interface automatically switches to the ",(0,o.jsx)(n.em,{children:"Run"})," tab and\ndisables other tabs, indicating that control has been handed over to external sources.","\n",(0,o.jsx)("div",{class:"text--center",children:(0,o.jsx)("img",{src:i,alt:"Switch mode from Local to Remote"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["In AICA Studio, make sure that the parameter ",(0,o.jsx)(n.code,{children:"Headless Mode"})," that can be found under the hardware interface parameters\nis set to ",(0,o.jsx)(n.code,{children:"True"}),". This will notify the hardware interface that it will be running headless, i.e. it is in charge of\nproviding the full UR program to the robot controller.","\n",(0,o.jsx)("div",{class:"text--center",children:(0,o.jsx)("img",{src:l,alt:"Headless Mode"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Finally, implement an application of your choice in AICA Studio. An example with a joint trajectory controller is given\nbelow. Observe how the robot program status goes from ",(0,o.jsx)(n.em,{children:"Stopped"})," to ",(0,o.jsx)(n.em,{children:"Running"})," as soon as the hardware interface connects\nto the robot."]}),"\n",(0,o.jsx)("div",{class:"text--center",children:(0,o.jsx)("img",{src:c,alt:"Example with Remote Control"})}),"\n",(0,o.jsxs)(r,{children:[(0,o.jsx)("summary",{children:"Example application, remote control"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'schema: 2-0-4\ndependencies:\n  core: v4.4.2\nframes:\n  wp_1:\n    reference_frame: world\n    position:\n      x: -0.027943\n      y: 0.600701\n      z: 0.202217\n    orientation:\n      w: 0.171776\n      x: 0.985056\n      y: 0.002386\n      z: -0.012313\n  wp_2:\n    reference_frame: world\n    position:\n      x: 0.260809\n      y: 0.604927\n      z: 0.194871\n    orientation:\n      w: 0.132343\n      x: 0.95897\n      y: -0.030587\n      z: -0.248852\n  wp_3:\n    reference_frame: world\n    position:\n      x: 0.147083\n      y: 0.552997\n      z: 0.328354\n    orientation:\n      w: 0.012478\n      x: 0.999843\n      y: 0.000392\n      z: -0.012536\non_start:\n  load:\n    hardware: hardware\nsequences:\n  sequence:\n    display_name: Sequence\n    steps:\n      - delay: 2\n      - call_service:\n          controller: joint_trajectory_controller\n          hardware: hardware\n          service: set_trajectory\n          payload: "{frames: [wp_1, wp_2, wp_3], durations: [1.0, 1.0, 1.0],\n            blending_factors: [1.0]}"\nhardware:\n  hardware:\n    display_name: Hardware Interface\n    urdf: Universal Robots 5e\n    rate: 500\n    events:\n      transitions:\n        on_load:\n          load:\n            - controller: robot_state_broadcaster\n              hardware: hardware\n            - controller: joint_trajectory_controller\n              hardware: hardware\n    controllers:\n      robot_state_broadcaster:\n        plugin: aica_core_controllers/RobotStateBroadcaster\n        events:\n          transitions:\n            on_load:\n              switch_controllers:\n                hardware: hardware\n                activate: robot_state_broadcaster\n      joint_trajectory_controller:\n        plugin: aica_core_controllers/trajectory/JointTrajectoryController\n        events:\n          predicates:\n            has_trajectory_succeeded:\n              application: stop\n          transitions:\n            on_load:\n              switch_controllers:\n                hardware: hardware\n                activate: joint_trajectory_controller\ngraph:\n  positions:\n    buttons:\n      button:\n        x: -460\n        y: 600\n    hardware:\n      hardware:\n        x: 620\n        y: -20\n    sequences:\n      sequence:\n        x: 40\n        y: 560\n  buttons:\n    button:\n      on_click:\n        sequence:\n          start: sequence\n  edges:\n    sequence_sequence_event_trigger_2_hardware_hardware_joint_trajectory_controller_set_trajectory:\n      path:\n        - x: 420\n          y: 1060\n        - x: 620\n          y: 1060\n        - x: 620\n          y: 900\n    sequence_sequence_event_trigger_1_hardware_hardware_joint_trajectory_controller_set_trajectory:\n      path:\n        - x: 240\n          y: 860\n    hardware_hardware_joint_trajectory_controller_has_trajectory_succeeded_on_stop_on_stop:\n      path:\n        - x: 540\n          y: 780\n        - x: 540\n          y: 480\n        - x: -20\n          y: 480\n        - x: -20\n          y: 140\n\n'})})]}),"\n",(0,o.jsx)(n.h3,{id:"run-an-aica-application-as-one-node-of-a-program",children:"Run an AICA application as one node of a program"}),"\n",(0,o.jsxs)(n.p,{children:["The second case requires the\n",(0,o.jsx)(n.a,{href:"https://github.com/UniversalRobots/Universal_Robots_ROS2_Driver/tree/jazzy/ur_robot_driver/resources",children:"External Control URCap"}),"\nto be installed. While the robot stays the primary device, the URCap comes with a program node that allows to hand over\ncontrol to secondary devices during the execution of that program node. This is especially useful for integrating\nsmaller, single purpose AICA applications into bigger, existing cells. Once the AICA application has finished its task,\nit hands back control to the robot which will continue the execution of the main UR program. To set this up, follow the\nthese steps:"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["The external control URCap needs to be configured to the right remote control address. Navigate to the ",(0,o.jsx)(n.em,{children:"Installation"}),"\ntab and set the address to the one of the device that will be running the AICA application.","\n",(0,o.jsx)("div",{class:"text--center",children:(0,o.jsx)("img",{src:p,alt:"External control URCap networking settings"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Insert the ",(0,o.jsx)(n.code,{children:"Control by <IP>"})," program node from the External Control URCap at the desired location of a new or\nexisting UR program. The robot remains in local mode.","\n",(0,o.jsx)("div",{class:"text--center",children:(0,o.jsx)("img",{src:u,alt:"UR Program with external control URCap",style:{width:"40%"}})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["In AICA Studio, set the ",(0,o.jsx)(n.code,{children:"Headless Mode"})," in the hardware interface ",(0,o.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Still in AICA Studio, the ",(0,o.jsx)(n.code,{children:"UR Dashboard Controller"})," should be added to the hardware interface. Its ",(0,o.jsx)(n.code,{children:"program_running"}),"\npredicate notifies that the UR program has arrived at the ",(0,o.jsx)(n.code,{children:"Control by <IP>"})," node and is ready to receive control\ncommands. After completion of the task in AICA Studio, control is handed back using a service call and the UR program\nresumes execution. More details about this controller follow in the next section.","\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["Sending motion commands to the robot should exclusively happen while the ",(0,o.jsx)(n.code,{children:"program_running"})," predicate is true.\nActivate motion controllers using this predicate and deactivate them upon handing back control."]})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The example with a joint trajectory controller from above is given here in its Local Control version. Be sure to start\nthe application in AICA Studio first, and the UR program second."}),"\n",(0,o.jsxs)(r,{children:[(0,o.jsx)("summary",{children:"Example application, local control"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'schema: 2-0-4\ndependencies:\n  core: v4.4.2\nframes:\n  wp_1:\n    reference_frame: world\n    position:\n      x: -0.027943\n      y: 0.600701\n      z: 0.202217\n    orientation:\n      w: 0.171776\n      x: 0.985056\n      y: 0.002386\n      z: -0.012313\n  wp_2:\n    reference_frame: world\n    position:\n      x: 0.260809\n      y: 0.604927\n      z: 0.194871\n    orientation:\n      w: 0.132343\n      x: 0.95897\n      y: -0.030587\n      z: -0.248852\n  wp_3:\n    reference_frame: world\n    position:\n      x: 0.147083\n      y: 0.552997\n      z: 0.328354\n    orientation:\n      w: 0.012478\n      x: 0.999843\n      y: 0.000392\n      z: -0.012536\non_start:\n  load:\n    hardware: hardware\nsequences:\n  sequence:\n    display_name: Sequence\n    steps:\n      - delay: 2\n      - call_service:\n          controller: joint_trajectory_controller\n          hardware: hardware\n          service: set_trajectory\n          payload: "{frames: [wp_1, wp_2, wp_3], durations: [1.0, 1.0, 1.0],\n            blending_factors: [1.0]}"\nhardware:\n  hardware:\n    display_name: Hardware Interface\n    urdf: Universal Robots 5e\n    rate: 500\n    events:\n      transitions:\n        on_load:\n          load:\n            - controller: robot_state_broadcaster\n              hardware: hardware\n            - controller: joint_trajectory_controller\n              hardware: hardware\n            - controller: ur_dashboard_controller\n              hardware: hardware\n    parameters:\n      headless_mode: "false"\n    controllers:\n      robot_state_broadcaster:\n        plugin: aica_core_controllers/RobotStateBroadcaster\n        events:\n          transitions:\n            on_load:\n              switch_controllers:\n                hardware: hardware\n                activate: robot_state_broadcaster\n      joint_trajectory_controller:\n        plugin: aica_core_controllers/trajectory/JointTrajectoryController\n        events:\n          predicates:\n            has_trajectory_succeeded:\n              call_service:\n                controller: ur_dashboard_controller\n                hardware: hardware\n                service: hand_back_control\n          transitions:\n            on_activate:\n              sequence:\n                start: sequence\n      ur_dashboard_controller:\n        plugin: aica_ur_controllers/URDashboardController\n        events:\n          predicates:\n            program_running:\n              switch_controllers:\n                hardware: hardware\n                activate: joint_trajectory_controller\n            hand_back_control_success:\n              application: stop\n          transitions:\n            on_load:\n              switch_controllers:\n                hardware: hardware\n                activate: ur_dashboard_controller\ngraph:\n  positions:\n    hardware:\n      hardware:\n        x: 780\n        y: 0\n    sequences:\n      sequence:\n        x: 80\n        y: 380\n  edges:\n    sequence_sequence_event_trigger_2_hardware_hardware_joint_trajectory_controller_set_trajectory:\n      path:\n        - x: 420\n          y: 1060\n        - x: 620\n          y: 1060\n        - x: 620\n          y: 900\n    on_start_on_start_hardware_hardware:\n      path:\n        - x: 440\n          y: 40\n        - x: 440\n          y: 60\n    hardware_hardware_joint_trajectory_controller_on_activate_sequence_sequence:\n      path:\n        - x: 20\n          y: 760\n        - x: 20\n          y: 440\n    sequence_sequence_event_trigger_1_hardware_hardware_joint_trajectory_controller_set_trajectory:\n      path:\n        - x: 280\n          y: 920\n    hardware_hardware_ur_dashboard_controller_program_running_hardware_hardware_joint_trajectory_controller:\n      path:\n        - x: 460\n          y: 1300\n        - x: 460\n          y: 640\n    hardware_hardware_ur_dashboard_controller_hand_back_control_success_on_stop_on_stop:\n      path:\n        - x: -20\n          y: 1260\n        - x: -20\n          y: 140\n    hardware_hardware_joint_trajectory_controller_has_trajectory_succeeded_hardware_hardware_ur_dashboard_controller_hand_back_control:\n      path:\n        - x: 680\n          y: 840\n        - x: 680\n          y: 1380\n'})})]}),"\n",(0,o.jsx)(n.h2,{id:"dashboard-controller",children:"Dashboard controller"}),"\n",(0,o.jsxs)(n.p,{children:["As shown in the example above, the ",(0,o.jsx)(n.code,{children:"UR Dashboard Controller"})," allows interaction with the UR programs to run AICA\napplications as part of a bigger UR program. With the External Control program node, control can be handed over to an\nAICA application. Once the AICA application has finished its tasks, control can be handed back for the UR program to\nresume execution."]}),"\n",(0,o.jsxs)(n.p,{children:["While this particular functionality is limited to the combination of the External Control program node in Local control\nwith the ",(0,o.jsx)(n.code,{children:"Headless mode"})," set to false, other features of the ",(0,o.jsx)(n.code,{children:"UR Dashboard Controller"})," can be used universally."]}),"\n",(0,o.jsx)("div",{class:"text--center",children:(0,o.jsx)("img",{src:m,alt:"UR Dashboard Controller",style:{width:"40%"}})}),"\n",(0,o.jsx)(n.p,{children:"The controller provides four services:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Hand back control: See ",(0,o.jsx)(n.a,{href:"#run-an-aica-application-as-one-node-of-a-program",children:"the example above"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Zero FT sensor: Triggering this service zeros the built-in force torque sensor."}),"\n",(0,o.jsxs)(n.li,{children:["Set payload: If the payload of the robot changes during the application, for example by picking up an object, this\nservice can be used to update the payload setting on the robot. Given the mass and center of gravity, call the service\nwith","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:"{mass: 1.2, cog: [0.15, 0.1, 0.05]}\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Resend robot program: In case the hardware interface was launched with ",(0,o.jsx)(n.code,{children:"Headless Mode"})," set to true and the UR program\nhas been stopped for some reason, this service can be triggered to restart the external control to be able to send\ncommands to the robot again."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Apart from the services, the controller has a very long list of predicates to observe changes in (Tool) Digital Inputs\nand Outputs as well as Configurable Inputs and Outputs. Additionally, it is worth mentioning the ",(0,o.jsx)(n.code,{children:"Program running"}),"\npredicate, which can be used to trigger activation of motion controllers once the robot notifies that the external\ncontrol is running."]}),"\n",(0,o.jsx)(n.p,{children:"Find below another example that uses the controller to set the payload on the robot."}),"\n",(0,o.jsxs)(r,{children:[(0,o.jsx)("summary",{children:"Example application, dashboard controller"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'schema: 2-0-4\ndependencies:\n  core: v4.0.0\non_start:\n  load:\n    hardware: hardware\nsequences:\n  sequence:\n    display_name: Sequence\n    steps:\n      - delay: 2\n      - call_service:\n          controller: ur_dashboard_controller\n          hardware: hardware\n          service: set_payload\n          payload: "{mass : 1.2, cog : [0.2, 0.2, 0.2]}"\n      - delay: 2\n      - call_service:\n          controller: ur_dashboard_controller\n          hardware: hardware\n          service: hand_back_control\nhardware:\n  hardware:\n    display_name: Hardware Interface\n    urdf: Universal Robots 5e\n    rate: 100\n    events:\n      transitions:\n        on_load:\n          load:\n            - controller: robot_state_broadcaster\n              hardware: hardware\n            - controller: ur_dashboard_controller\n              hardware: hardware\n    parameters:\n      headless_mode: "False"\n    controllers:\n      robot_state_broadcaster:\n        plugin: aica_core_controllers/RobotStateBroadcaster\n        events:\n          transitions:\n            on_load:\n              switch_controllers:\n                hardware: hardware\n                activate: robot_state_broadcaster\n      ur_dashboard_controller:\n        plugin: aica_ur_controllers/URDashboardController\n        events:\n          transitions:\n            on_load:\n              switch_controllers:\n                hardware: hardware\n                activate: ur_dashboard_controller\n          predicates:\n            program_running:\n              sequence:\n                start: sequence\ngraph:\n  positions:\n    stop:\n      x: 320\n      y: 120\n    hardware:\n      hardware:\n        x: 940\n        y: -20\n    sequences:\n      sequence:\n        x: 120\n        y: 220\n  edges:\n    sequence_sequence_event_trigger_1_hardware_hardware_ur_dashboard_controller_set_payload:\n      path:\n        - x: 320\n          y: 900\n    sequence_sequence_event_trigger_3_hardware_hardware_ur_dashboard_controller_hand_back_control:\n      path:\n        - x: 640\n          y: 860\n    hardware_hardware_ur_dashboard_controller_program_running_sequence_sequence:\n      path:\n        - x: 100\n          y: 780\n        - x: 100\n          y: 280\n'})})]}),"\n",(0,o.jsx)("div",{class:"text--center",children:(0,o.jsx)("img",{src:d,alt:"Sequence application graph"})}),"\n",(0,o.jsx)(n.h2,{id:"force-mode",children:"Force Mode"}),"\n",(0,o.jsxs)(n.p,{children:["e-Series and UR series robots have a built-in end of arm force torque sensor that can be leveraged for force sensitive\ncontrol. In UR terminology, this feature is called ",(0,o.jsx)(n.em,{children:"force mode"})," and can be used to perform motions along a desired\ndirection or path while being force compliant in certain axes or directions."]}),"\n",(0,o.jsx)(n.p,{children:"With the UR collection in the AICA System, we provide two controllers that very explicitly use and augment the internal\nforce mode to behave like impedance and admittance controllers."}),"\n",(0,o.jsx)(n.h3,{id:"impedance-controller",children:"Impedance controller"}),"\n",(0,o.jsx)(n.p,{children:"In robotics, a true impedance controller requires direct joint torque control, a requirement not met in force mode. Yet,\nwe can use the impedance law to translate desired displacements and velocities into a wrench command and let the robot\nregulate that through force mode. This enables safe interaction with the environment, making this type of control highly\nadapted for assembly, surface finishing and teleoperation tasks."}),"\n",(0,o.jsxs)(n.p,{children:["Using desired stiffness and damping parameters, the ",(0,o.jsx)(n.code,{children:"UR Impedance Controller"})," calculates and applies a wrench in task\nspace from its desired and current state. By default, the controller is compliant in all directions, with the\npossibility to disable certain axes individually. A valid configuration of the controller can be found in the image\nbelow."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"For the controller to operate correctly, the sensor name, sensor reference frame and force limits need to be provided."})}),"\n",(0,o.jsx)("div",{class:"text--center",children:(0,o.jsx)("img",{src:x,alt:"UR Impedance controller parameters",style:{width:"40%"}})}),"\n",(0,o.jsx)(n.h3,{id:"hand-guiding-controller",children:"Hand Guiding controller"}),"\n",(0,o.jsxs)(n.p,{children:["Using the teach pendant with the freedrive button, operators can manually adjust the position of the robot. The\nfreedrive mode makes the individual actuators backdriveable but due to the different friction and stiffness, pushing and\npulling on the robot usually results in rather uncoordinated motion. To alleviate this and enable smooth trajectory\nrecording and kinesthetic teaching for machine learning algorithms, the UR collection comes with the\n",(0,o.jsx)(n.code,{children:"UR Hand Guiding Controller"}),". This is a classic admittance controller that ",(0,o.jsx)(n.em,{children:"admits"})," measured forces by transforming them\ninto a motion."]}),"\n",(0,o.jsxs)(n.p,{children:["The controller provides additional functionality to limit and maintain the end effector pose in space. For example, this\ncan be used to keep the tool frame upright during teaching. As with the ",(0,o.jsx)(n.code,{children:"UR Impedance Controller"})," the compliant axes can\nby enabled and disabled individually."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"For the controller to operate correctly, the sensor name, sensor reference frame and force limits need to be provided."})}),"\n",(0,o.jsx)(n.p,{children:"The controller can be further tuned and adjusted by using its parameters:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Velocity / Force limits"}),": The maximal desired velocities and forces that should be applied by the controller."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Compliant axes"}),": Selection vector for which axes should be compliant or not (1 for enabled, 0 for disabled)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Force / Torque threshold"}),": The thresholds above which the hand guiding is activated. Values below are considered\nnoise."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Hold delay"}),": If the forces stay below the thresholds for this amount of time, hand guiding is deactivated."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"X / Y / Z limits"}),": The spatial boundaries for the end effector motion with respect to the base frame, vectors of\ntwo values for the lower and upper limit."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Reference orientation"}),": A quaternion representing the desired orientation with respect to the base frame."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Angular limit"}),": The allowed deviation from the reference orientation."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Linear / Angular boundary strength"}),": If linear or angular limits are set, these values scale the response of the\ncontroller to hold the robot within the limits."]}),"\n"]}),"\n",(0,o.jsx)("div",{class:"text--center",children:(0,o.jsx)("img",{src:h,alt:"Hand guiding controller parameters",style:{width:"40%"}})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"Attempts to guide the robot by pushing on individual links will fail, as the forces are measured at the sensor at the\nend effector."})})]})}function _(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(j,{...e})}):j(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>i});var t=r(6540);const o={},a=t.createContext(o);function s(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);