<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-core docs-version-v4 docs-doc-page docs-doc-id-examples/guides/abb-hardware-interface" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">ABB manipulators | AICA for Developers</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.aica.tech/core/v4/examples/guides/abb-hardware-interface"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v4"><meta data-rh="true" name="docusaurus_tag" content="docs-core-v4"><meta data-rh="true" name="docsearch:version" content="v4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-core-v4"><meta data-rh="true" property="og:title" content="ABB manipulators | AICA for Developers"><meta data-rh="true" name="description" content="ABB offers a wide range of industrial articulated manipulators, from compact 6-axis robots for small-part handling and"><meta data-rh="true" property="og:description" content="ABB offers a wide range of industrial articulated manipulators, from compact 6-axis robots for small-part handling and"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.aica.tech/core/v4/examples/guides/abb-hardware-interface"><link data-rh="true" rel="alternate" href="https://docs.aica.tech/core/v4/examples/guides/abb-hardware-interface" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.aica.tech/core/v4/examples/guides/abb-hardware-interface" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.6c70633e.css">
<script src="/assets/js/runtime~main.a90ec976.js" defer="defer"></script>
<script src="/assets/js/main.b0fa2461.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/getting-started"><div class="navbar__logo"><img src="/img/aica-logo-black-square-small.svg" alt="AICA Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="22" width="22"><img src="/img/aica-logo-white-square-small.svg" alt="AICA Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="22" width="22"></div><b class="navbar__title text--truncate">AICA Documentation</b></a><div class="navbarSearchContainer_Bca1"></div><a class="navbar__item navbar__link" href="/docs/getting-started">Knowledge Base</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/core/v4/studio">AICA Studio</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/core/v4/examples/guides/abb-hardware-interface">AICA Core v4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/core/examples/guides/abb-hardware-interface">AICA Core v5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/core/v4/examples/guides/abb-hardware-interface">AICA Core v4</a></li></ul></div><a class="navbar__item navbar__link" href="/faq">FAQ</a><a class="navbar__item navbar__link" href="/help">Help</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/core/v4/studio">Tour of AICA Studio</a><button aria-label="Collapse sidebar category &#x27;Tour of AICA Studio&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/studio/editor">Application editor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/studio/graph">Application graph</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/studio/live-views">Live views</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/core/v4/examples">Examples</a><button aria-label="Collapse sidebar category &#x27;Examples&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/core/v4/category/guides">Guides</a><button aria-label="Collapse sidebar category &#x27;Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/guides/timer-example">A basic application example</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/guides/editor-example">The application graph editor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/guides/mock-hardware-example">An application with hardware</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/guides/application-frames">Application frames</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/guides/jtc-guide">A guide on joint trajectory workflows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/guides/realsense-component">RealSense camera component</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/guides/orbbec-component">Orbbec camera component</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/guides/ur-harware-interface">Universal Robots</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/guides/ur-sim-guide">URSim guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/core/v4/examples/guides/abb-hardware-interface">ABB manipulators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/guides/isaaclab-aica-bridge">Using Isaac Lab as a simulator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/guides/camera-streamer">CameraStreamer component</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/guides/camera-calibration">Camera calibration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/core/v4/category/core-components">Core Components</a><button aria-label="Collapse sidebar category &#x27;Core Components&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/core-components/signal-interoperability">Signal interoperability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/core-components/colliders">Colliders</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/core-components/point-attractor">Point Attractors</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/core/v4/category/core-controllers">Core Controllers</a><button aria-label="Collapse sidebar category &#x27;Core Controllers&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/v4/examples/core-controllers/jtc-example">A joint trajectory execution example</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/core/v4/examples"><span itemprop="name">Examples</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/core/v4/category/guides"><span itemprop="name">Guides</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ABB manipulators</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: AICA Core v4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ABB manipulators</h1></header>
<p>ABB offers a wide range of industrial articulated manipulators, from compact 6-axis robots for small-part handling and
payloads of a few kilograms to heavy-duty models capable of lifting up to 800 kg. This guide provides instructions for
using ABB robots within the AICA System, focusing on connecting and configuring both simulated environments using
RobotStudio and real hardware setups.</p>
<p>To use the ABB collection, add <code>collections/abb</code> <strong>v1.0.0 or higher</strong> to your configuration in AICA Launcher, currently
supporting the following robot models out of the box:</p>
<ul>
<li>IRB 1010</li>
<li>GoFa CRB 15000, 12 Kg</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="general">General<a href="#general" class="hash-link" aria-label="Direct link to General" title="Direct link to General">​</a></h2>
<p>This guide and the provided drivers are designed for ABB robots connected to OmniCore controllers, whether in simulation
or with real hardware. Ensure your setup uses <strong>RobotWare for OmniCore</strong> for full compatibility with the instructions
and features described below.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>This collection supports RobotWare versions 7.X and above. For older versions, contact the AICA support team.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="externally-guided-motion">Externally Guided Motion<a href="#externally-guided-motion" class="hash-link" aria-label="Direct link to Externally Guided Motion" title="Direct link to Externally Guided Motion">​</a></h3>
<p>ABB permits remote control of its manipulator range using the Externally Guided Motion (EGM) feature. EGM
provides external devices with the ability to send commands and control ABB robotic arms, using Google&#x27;s Protocol
Buffers (Protobuf) serialization library to transport information through UDP sockets. For more information, check out
the
<a href="https://library.e.abb.com/public/344f15f0f43341eb944fe35279d9fa2e/3HAC073319+AM+Externally+Guided+Motion+RW6-en.pdf?x-sign=WlxgV7Vao27KV3d3hlsfaoykgctYqoA0F98ch89S%2FPEaGwQg47ou%2FioylQtzvLaV" target="_blank" rel="noopener noreferrer">official product documentation</a>.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>EGM is an optional add-in and has to be purchased separately.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="robot-web-services">Robot Web Services<a href="#robot-web-services" class="hash-link" aria-label="Direct link to Robot Web Services" title="Direct link to Robot Web Services">​</a></h3>
<p>The second ABB feature that AICA System utilizes to connect to the robot is Robot Web Services (RWS). RWS is a platform
that enables developers to create applications that interact with the robot controller, using RESTful APIs that leverage
the HTTPS protocol. The hardware interface uses RWS for auxiliary functionality, such as starting/stopping the program
and the motors, and setting IOs. Setting up RWS on the simulator and on the actual robot requires slightly different
steps, which will be explained in the following sections. More information can be found on the
<a href="https://developercenter.robotstudio.com/api/RWS" target="_blank" rel="noopener noreferrer">product reference page</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rapid">RAPID<a href="#rapid" class="hash-link" aria-label="Direct link to RAPID" title="Direct link to RAPID">​</a></h3>
<p>RAPID is the programming language of ABB robots. Users can utilize RAPID to set up and execute their workflows and
processes. This is enabled by user-defined libraries called <em>Modules</em>, that contain variables and functions or
processes (<em>PROCs</em>). Modules can then be loaded in controller <em>Tasks</em>, and called as required.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="connecting-to-a-robot">Connecting to a robot<a href="#connecting-to-a-robot" class="hash-link" aria-label="Direct link to Connecting to a robot" title="Direct link to Connecting to a robot">​</a></h2>
<p>The hardware interface provided by the ABB collection can be used to control either a simulated or a real robot. The
following sections provide the necessary steps to do both.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="robotstudio-simulation">RobotStudio simulation<a href="#robotstudio-simulation" class="hash-link" aria-label="Direct link to RobotStudio simulation" title="Direct link to RobotStudio simulation">​</a></h3>
<p><a href="https://new.abb.com/products/robotics/software-and-digital/robotstudio" target="_blank" rel="noopener noreferrer">RobotStudio</a> is the official ABB offline
programming and simulation tool for robotics applications. It allows to run virtual controllers that mimic the behavior
of the real robot, ensuring seamless transition between simulation and hardware. It can also be used to configure
several aspects of the real controller.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The RobotStudio software suite is available only for Windows, so you may need to set it up on a secondary device or a
virtual machine.</p></div></div>
<p>Setting up a virtual workstation and controller can be achieved by following the next steps:</p>
<ol>
<li>In RobotStudio, navigate to the <strong>Add-Ins</strong> tab and go to <strong>Gallery</strong>. There is a list of all available robot models
and RobotWare versions, the internal controller software. To ensure consistency between simulation and reality, make
sure to install the versions matching the real robot controller, if one is available.<!-- -->
<div class="text--center"><img src="/assets/images/abb-install-addins-4b3f2dbf2ad7cb63900ee78860e1eae5.png" alt="Install necessary addins in RobotStudio."></div>
</li>
<li>Go back to to <strong>File &gt; New &gt; Project</strong>.</li>
<li>Select to create a new controller and define the robot model and variant, as well as the RobotWare version.</li>
<li>Make sure to activate the <strong>Customize Options</strong> button. This is required to add EGM in a next step.<!-- -->
<div class="text--center"><img src="/assets/images/abb-new-project-826f6f982adba4683111dc12c6ba1968.png" alt="Create a new RobotStudio project."></div>
</li>
<li>Select <strong>Create</strong> to create the new project.</li>
<li>In the window that pops up, in the <strong>Options</strong> tab, look for <strong>EGM</strong> and <strong>RobotStudio Connect</strong> and add them in the
controller. Then select <strong>Apply and Reset</strong> to finalize.<!-- -->
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The <strong>3119-1 RobotStudio Connect</strong> add-in is required to connect a controller to RobotStudio over a public network.
For more information, see the RobotStudio instruction manual.</p></div></div>
<div class="text--center"><img src="/assets/images/abb-additional-options-622deb62e20bbe5c824b1f486eb5c669.png" alt="Additional options in the RobotStudio project."></div>
</li>
<li>Disable the Windows firewall on the network where the PC running AICA Core is connected to.</li>
<li>Finally, the PC running AICA Core has to be whitelisted to communicate with RobotStudio. As explained
<a href="https://forums.robotstudio.com/discussion/12082/using-robotwebservices-to-access-a-remote-virtual-controller" target="_blank" rel="noopener noreferrer">here</a>,
create a file called <code>vcconf.xml</code> under <code>C:/Users/&lt;user&gt;/AppData/Roaming/ABB Industrial IT/Robotics IT/RobVC</code> with
the content below. Replace <code>&lt;user&gt;</code> in the path above with your Windows user and the IP address in the snippet below with
the IP of the PC running AICA Core (in this example 192.168.137.100).<!-- -->
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">vcconf.xml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">VCConfiguration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">RemoteVCConfiguration</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">PublicationEnabled</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">hosts</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">host</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ip</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">192.168.137.100</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">hosts</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">VCConfiguration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="real-robot-controller">Real robot controller<a href="#real-robot-controller" class="hash-link" aria-label="Direct link to Real robot controller" title="Direct link to Real robot controller">​</a></h3>
<p>RobotStudio can be used to configure the address of the external control device. Navigate to the Controller tab and
select <strong>Add Controller &gt; Connect to Controller</strong>. This will allow to detect and connect to the running controller in
OmniCore, provided of course that the devices are on the same network.</p>
<div class="text--center"><img src="/assets/images/abb-connect-controller-1125729258b952d25303aa6434c2165f.png" alt="Connect to the robot controller."></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="network-and-device-configuration">Network and device configuration<a href="#network-and-device-configuration" class="hash-link" aria-label="Direct link to Network and device configuration" title="Direct link to Network and device configuration">​</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Modifications in the real robot controller require write access. To get it, click on <strong>Request Write Access</strong> and
confirm on the pendant&#x27;s screen. To save these modifications, the controller has to be restarted. While this takes
seconds in simulation, the restart procedure in the real robot might take a few minutes, so make all necessary changes,
and then restart.</p></div></div>
<p>After connecting to the robot, the controller should be configured to accept commands from an external device.</p>
<ol>
<li>Navigate to the Controller tab &gt; Configuration &gt; Communication &gt; UDP Unicast Device, and add a new UDPUC device (or
modify the existing one), configured as shown below. This is the PC running AICA Core, the external control device,
so the address should be set accordingly.<!-- -->
<div class="text--center"><img src="/assets/images/abb-controller-configuration-d7b8297e9f967d42c8e8fae771817398.png" alt="Controller configuration settings."></div>
<div class="text--center"><img src="/assets/images/abb-new-udpuc-device-0404e1a7915769746e026819d794d218.png" alt="Add a new UDPUC device."></div>
</li>
<li>Navigate to the Controller tab &gt; Configuration &gt; Communication &gt; Firewall Manager, and make sure that UDPUC and
RobotWebServices are enabled in the network that is being used.<!-- -->
<div class="text--center"><img src="/assets/images/abb-firewall-manager-3b29186082d2babbdf74a255b201145b.png" alt="Firewall manager options."></div>
</li>
<li>Navigate to the Controller tab &gt; Configuration &gt; I/O System &gt; Signal, and add a new signal as shown below.<!-- -->
<div class="text--center"><img src="/assets/images/abb-analog-signal-07609b87971046d6c15edc866a03c0fc.png" alt="Add analog signal." style="width:536px"></div>
</li>
<li>Finally, for the changes to take effect, restart the controller.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rapid-module">RAPID module<a href="#rapid-module" class="hash-link" aria-label="Direct link to RAPID module" title="Direct link to RAPID module">​</a></h2>
<p>The ABB hardware interface provided by AICA needs a matching RAPID module running on the robot to allow external control
through EGM. Place the module below in the controller&#x27;s home directory and upload it to the current task.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>The setup steps above are required for the module to run properly, follow them closely.</p></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>AICA_EGM.modx</summary><div><div class="collapsibleContent_i85q"><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MODULE AICA_EGM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL RECORD EGMSettings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ! UdpUc device name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string uc_device</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ! Time</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">out </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> communication </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> the external UdpUC device </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num comm_timeout</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ! The convergence criteria datais used to decide </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> the robot has reached the ordered joint positions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num cond_min_max</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ! Maximum admitted joint speed change </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> degrees</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">second</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num max_speed_deviation</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ! The time </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> seconds that the convergence criteria defined </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> EGMActJoint has to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        !   be fulfilled before the target point </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> considered to be reached</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num cond_time</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ! Defines </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> seconds how fast the movement </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> started</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num ramp_in_time</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ! Position correction gain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> A value between </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num pos_corr_gain</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ENDRECORD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL CONST string CONTEXT_MAIN</span><span class="token operator" style="color:#393A34">:=</span><span class="token string" style="color:#e3116c">&quot;[Main]: &quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL CONST string CONTEXT_EGM</span><span class="token operator" style="color:#393A34">:=</span><span class="token string" style="color:#e3116c">&quot;[EGM]: &quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL CONST num STATE_IDLE</span><span class="token operator" style="color:#393A34">:=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL CONST num STATE_INITIALIZE</span><span class="token operator" style="color:#393A34">:=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL CONST num STATE_RUN_EGM</span><span class="token operator" style="color:#393A34">:=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL VAR num current_state</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL VAR errnum CHANGE_STATE</span><span class="token operator" style="color:#393A34">:=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL VAR num idle_counter</span><span class="token operator" style="color:#393A34">:=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL VAR intnum intnum_start_egm</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL VAR intnum intnum_stop_egm</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL VAR intnum intnum_restart_egm</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ! EGM settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL CONST string DEFAULT_UC_DEVICE</span><span class="token operator" style="color:#393A34">:=</span><span class="token string" style="color:#e3116c">&quot;UC_DEVICE&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL VAR egmident egm_id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL VAR EGMSettings settings</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL VAR egm_minmax minmax_condition</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL VAR </span><span class="token builtin">bool</span><span class="token plain"> egm_setup</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL VAR jointtarget current_j</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PROC main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TPErase</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initialize</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        printInfoMessage </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_MAIN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Starting StateMachine loop&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        WHILE TRUE DO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TEST current_state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                CASE STATE_RUN_EGM</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    runEGM</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                DEFAULT</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    runIdle</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ENDTEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            WaitTime </span><span class="token number" style="color:#36acaa">0.01</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ENDWHILE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ERROR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CHANGE_STATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        idle_counter</span><span class="token operator" style="color:#393A34">:=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TRYNEXT</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ENDPROC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL PROC initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IDisable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BookErrNo CHANGE_STATE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IDelete intnum_stop_egm</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CONNECT intnum_stop_egm WITH handleStopEGM</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ISignalAI AICA_EGM_STATE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AIO_BELOW_LOW</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> intnum_stop_egm</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IDelete intnum_start_egm</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CONNECT intnum_start_egm WITH handleStartEGM</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ISignalAI AICA_EGM_STATE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AIO_BETWEEN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> intnum_start_egm</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IDelete intnum_restart_egm</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CONNECT intnum_restart_egm WITH handleRestartEGM</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ISignalAI AICA_EGM_STATE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AIO_BETWEEN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> intnum_restart_egm</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        current_state</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">STATE_IDLE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        EGMReset egm_id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        EGMGetId egm_id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        egm_setup</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uc_device</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">DEFAULT_UC_DEVICE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">comm_timeout</span><span class="token operator" style="color:#393A34">:=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cond_min_max</span><span class="token operator" style="color:#393A34">:=</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">max_speed_deviation</span><span class="token operator" style="color:#393A34">:=</span><span class="token number" style="color:#36acaa">120</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> ! lowest axis speed on GoFa 12kg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cond_time</span><span class="token operator" style="color:#393A34">:=</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ramp_in_time</span><span class="token operator" style="color:#393A34">:=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pos_corr_gain</span><span class="token operator" style="color:#393A34">:=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ENDPROC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL PROC runEGM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IF NOT egm_setup THEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            printInfoMessage </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_EGM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Wait until zero speed&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            WaitRob\ZeroSpeed</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            minmax_condition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">min</span><span class="token operator" style="color:#393A34">:=</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">Abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cond_min_max</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            minmax_condition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">max</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">Abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cond_min_max</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            EGMSetupUC ROB_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> egm_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uc_device \Joint \CommTimeout</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">comm_timeout</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            EGMActJoint egm_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        \J1</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">minmax_condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        \J2</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">minmax_condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        \J3</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">minmax_condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        \J4</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">minmax_condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        \J5</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">minmax_condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        \J6</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">minmax_condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        \MaxSpeedDeviation</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">max_speed_deviation</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            printInfoMessage </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_EGM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;EGM set up&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            egm_setup</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ENDIF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IF egm_setup AND EGMGetState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">egm_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">EGM_STATE_CONNECTED THEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            printInfoMessage </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_EGM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Starting EGM&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            saturateValue settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pos_corr_gain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            EGMRunJoint egm_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        EGM_STOP_HOLD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        \J1\J2\J3\J4\J5\J6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        \CondTime</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cond_time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        \RampInTime</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ramp_in_time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        \PosCorrGain</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pos_corr_gain</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            printInfoMessage </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_EGM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;EGMRunJoint terminated&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ENDIF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ERROR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IF ERRNO</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ERR_UDPUC_COMM THEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            printInfoMessage </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_EGM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Communication timeout&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            egm_setup</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TRYNEXT</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ENDIF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ENDPROC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL PROC runIdle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IF idle_counter MOD </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> THEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            printInfoMessage </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_MAIN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Idling...&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            idle_counter</span><span class="token operator" style="color:#393A34">:=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ENDIF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Incr idle_counter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ERROR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RAISE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ENDPROC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL TRAP handleStopEGM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        printInfoMessage </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_MAIN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Handling EGM stop&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IF current_state</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">STATE_RUN_EGM AND EGMGetState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">egm_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">EGM_STATE_RUNNING THEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            EGMStop egm_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">EGM_STOP_HOLD</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            current_state</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">STATE_IDLE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            RAISE CHANGE_STATE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ENDIF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        printInfoMessage </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_MAIN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;EGM stop is not possible&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ERROR </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CHANGE_STATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RAISE CHANGE_STATE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ENDTRAP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL TRAP handleStartEGM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        printInfoMessage </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_MAIN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Handling EGM start&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IF current_state</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">STATE_IDLE THEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            current_state</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">STATE_RUN_EGM</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            RAISE CHANGE_STATE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ENDIF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        printInfoMessage </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_MAIN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;EGM start is not possible&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ERROR </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CHANGE_STATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RAISE CHANGE_STATE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ENDTRAP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL TRAP handleRestartEGM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        printInfoMessage </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_MAIN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Handling EGM restart&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IF current_state</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">STATE_RUN_EGM AND EGMGetState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">egm_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">EGM_STATE_RUNNING THEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            EGMStop egm_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">EGM_STOP_HOLD</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            RAISE CHANGE_STATE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ENDIF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        printInfoMessage </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_MAIN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;EGM restart is not possible&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ERROR </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CHANGE_STATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RAISE CHANGE_STATE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ENDTRAP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PROC saturateValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VAR num value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> num minimum</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> num maximum</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IF value </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> minimum THEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            value </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> minimum</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ELSEIF value </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> maximum THEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            value </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> maximum</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ENDIF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ENDPROC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL PROC printInfoMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">num indention_level</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> string context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> string message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VAR string temp_indention</span><span class="token operator" style="color:#393A34">:=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">indention_level </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> THEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            FOR i FROM </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> TO indention_level</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> DO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                temp_indention</span><span class="token operator" style="color:#393A34">:=</span><span class="token plain">temp_indention </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; &quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ENDFOR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ENDIF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TPWrite temp_indention </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> context </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ENDPROC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOCAL PROC printEGMState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TEST EGMGetState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">egm_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CASE EGM_STATE_DISCONNECTED</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            printInfoMessage </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_EGM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DISCONNECTED&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CASE EGM_STATE_CONNECTED</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            printInfoMessage </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_EGM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;CONNECTED&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CASE EGM_STATE_RUNNING</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            printInfoMessage </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_EGM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;RUNNING&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DEFAULT</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            printInfoMessage </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONTEXT_EGM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;UNKNOWN&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ENDTEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ENDPROC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENDMODULE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hardware-interface">Hardware interface<a href="#hardware-interface" class="hash-link" aria-label="Direct link to Hardware interface" title="Direct link to Hardware interface">​</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>For optimal performance, set the hardware interface rate to 250 Hertz. This matches ABB&#x27;s recommended stable limit for
UDP data exchange.</p></div></div>
<p>Returning to AICA Studio and the hardware interface, it is now possible to define the parameters and connect to the
robot. The majority of the hardware interface parameters enable connection to EGM and RWS:</p>
<div class="text--center"><img src="/assets/images/abb-hi-parameters-3d1fb47bd6636e6286117a024c6e2c7c.png" alt="ABB Hardware interface parameters"></div>
<ul>
<li>RWS IP &amp; port: the address and port of the RWS server, e.g. the address of the real robot or the RobotStudio device<!-- -->
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>OmniCore controllers and RobotWare 7.x versions by default listen on HTTPS and port 80 for RobotStudio and 443 for the
real robot. If necessary, the port numbers can be modified by following the instructions in this
<a href="https://forums.robotstudio.com/discussion/12177/how-to-change-the-listening-port-of-the-virtual-controller-robotware-6-x-and-7-x" target="_blank" rel="noopener noreferrer">forum post</a>.</p></div></div>
</li>
<li>EGM port: the port of the EGM server, e.g. the <em>Remote Port Number</em> of the UDPUC device defined in RobotStudio above</li>
<li>Connection timeout: the amount of time the hardware interface tries to connect to the RWS and EGM servers before
reporting an error</li>
<li>Controller Task and Main Module name: Depends on the controller configuration and usually defaults to <code>T_ROB1</code> and
<code>AICA_EGM</code>, respectively.</li>
<li>Uc Device: The name of the UDPUC device configured above.</li>
</ul>
<p>Before starting an application with an ABB hardware interface in AICA Studio, the motors and RAPID program on the robot
must be started manually through the teach pendant or RobotStudio. After that, running the application will connect to
the robot and get information about the mechanical setup of the robot being used.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/aica-technology/api/tree/main/core/core_versioned_docs/version-v4/examples/guides/abb-hardware-interface.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/core/v4/examples/guides/ur-sim-guide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">URSim guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/core/v4/examples/guides/isaaclab-aica-bridge"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using Isaac Lab as a simulator</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#general" class="table-of-contents__link toc-highlight">General</a><ul><li><a href="#externally-guided-motion" class="table-of-contents__link toc-highlight">Externally Guided Motion</a></li><li><a href="#robot-web-services" class="table-of-contents__link toc-highlight">Robot Web Services</a></li><li><a href="#rapid" class="table-of-contents__link toc-highlight">RAPID</a></li></ul></li><li><a href="#connecting-to-a-robot" class="table-of-contents__link toc-highlight">Connecting to a robot</a><ul><li><a href="#robotstudio-simulation" class="table-of-contents__link toc-highlight">RobotStudio simulation</a></li><li><a href="#real-robot-controller" class="table-of-contents__link toc-highlight">Real robot controller</a></li></ul></li><li><a href="#network-and-device-configuration" class="table-of-contents__link toc-highlight">Network and device configuration</a></li><li><a href="#rapid-module" class="table-of-contents__link toc-highlight">RAPID module</a></li><li><a href="#hardware-interface" class="table-of-contents__link toc-highlight">Hardware interface</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Product Knowledge Base</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts">Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/reference">Programming Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/help">More Resources</a></li><li class="footer__item"><a class="footer__link-item" href="/faq">FAQ</a></li></ul></div><div class="col footer__col"><div class="footer__title">AICA Studio</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/core/studio/">Tour of AICA Studio</a></li><li class="footer__item"><a class="footer__link-item" href="/core/examples/">Examples</a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://link.aica.tech/api" target="_blank" rel="noopener noreferrer" class="footer__link-item">AICA API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://link.aica.tech/aicademy" target="_blank" rel="noopener noreferrer" class="footer__link-item">AICAdemy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.github.com/aica-technology" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">AICA</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/aica-technology/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">AICA Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.aica.tech" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:contact@aica.tech" target="_blank" rel="noopener noreferrer" class="footer__link-item">contact@aica.tech<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/logo.svg" alt="AICA Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="42" height="42"><img src="/img/logo_dark.svg" alt="AICA Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="42" height="42"></div><div class="footer__copyright">Copyright © 2026 AICA SA</div></div></div></footer></div>
</body>
</html>