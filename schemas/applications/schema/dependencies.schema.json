{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Dependencies",
  "description": "The application dependencies, including the version of AICA Core and any required packages",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "core": {
      "title": "Core Version",
      "description": "The version of the AICA Core image",
      "examples": [
        "v3.1.1",
        "v4.0.0"
      ],
      "type": "string",
      "pattern": "^v[0-9]+\\.[0-9]+\\.[0-9]+$"
    },
    "packages": {
      "title": "Application Packages",
      "description": "A list of packages required by the application",
      "type": "array",
      "uniqueItems": true,
      "items": {
        "title": "Package Details",
        "description": "The specification of a package name and version with optional version constraints",
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "package": {
            "title": "Package Name",
            "description": "The name of the package",
            "examples": [
              "@aica/components/pose-detection",
              "@aica/collections/ur-collection"
            ],
            "type": "string"
          },
          "version": {
            "title": "Package Version",
            "description": "The specific version of the package used by the author of the application",
            "examples": [
              "v1.2.3",
              "docker-image://ghcr.io/aica-technology/custom-package:v0.1.0"
            ],
            "type": "string",
            "pattern": "^(v[0-9]+\\.[0-9]+\\.[0-9]+)|(docker-image://.*)$"
          },
          "constraints": {
            "title": "Package Version Constraint",
            "description": "A range of acceptable package versions that are supported by the application defined by constraints. For more details on syntax, see https://developer.hashicorp.com/terraform/language/expressions/version-constraints",
            "examples": [
              "1.0.0",
              "= 1.0.1",
              "> 1.0.2",
              ">= 1.0.3",
              "~> 1.0.4",
              "~> 1.1",
              ">= 1.1.0, < 2.0.0",
              ">= 2.0.0, != 2.0.1, <= 2.0.2"
            ],
            "type": "string",
            "pattern": "^(\\s*(=|!=|<|<=|>|>=|~>)?\\s*([0-9]+\\.[0-9]+(\\.[0-9]+)?)\\s*,?\\s*)+$"
          }
        },
        "required": [
          "package",
          "version"
        ]
      }
    }
  },
  "required": [
    "core"
  ]
}