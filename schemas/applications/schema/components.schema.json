{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Components",
  "description": "A description of components used in the application",
  "type": "object",
  "additionalProperties": false,
  "patternProperties": {
    "(^[a-z][a-z0-9_]*[a-z0-9]$)|(^[a-z]$)": {
      "title": "Component",
      "description": "A named component configuration",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "log_level": {
          "$ref": "common/log_level.schema.json"
        },
        "display_name": {
          "title": "Component Display Name",
          "description": "The human-readable name to display on the component",
          "type": "string"
        },
        "component": {
          "title": "Component Registration",
          "description": "The fully qualified class name used to register the component",
          "type": "string"
        },
        "mapping": {
          "title": "Component Mapping",
          "description": "The remapping rules for the component name and namespace",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "name": {
              "title": "Name Mapping",
              "description": "The remapping rules for the component name",
              "type": "string",
              "pattern": "^[a-z][a-z0-9_]*[a-z0-9]$"
            },
            "namespace": {
              "title": "Namespace Mapping",
              "description": "The remapping rules for the component namespace",
              "type": "string",
              "pattern": "^[a-z][a-z0-9_]*[a-z0-9]$"
            }
          }
        },
        "parameters": {
          "$ref": "common/parameters.schema.json"
        },
        "inputs": {
          "$ref": "common/inputs.schema.json"
        },
        "outputs": {
          "$ref": "common/outputs.schema.json"
        },
        "input_collections": {
          "title": "Input collections",
          "description": "Collections of input signals of the component",
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "(^[a-z][a-z0-9_]*[a-z0-9]$)|(^[a-z]$)": {
              "title": "Input topics",
              "description": "The array of topics that are included in the signal collection",
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "events": {
          "title": "Component Events",
          "description": "Component event sources that can trigger events",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "transitions": {
              "title": "Component State Transitions",
              "description": "Component state transitions that can trigger events",
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "on_load": {
                  "title": "On Load",
                  "description": "Trigger events when the component is loaded",
                  "$ref": "events.schema.json"
                },
                "on_configure": {
                  "title": "On Configure (lifecycle)",
                  "description": "Trigger events when the lifecycle component has been successfully configured and is in the configured state",
                  "$ref": "events.schema.json"
                },
                "on_activate": {
                  "title": "On Activate (lifecycle)",
                  "description": "Trigger events when the lifecycle component has been successfully activated and is in the active state",
                  "$ref": "events.schema.json"
                },
                "on_deactivate": {
                  "title": "On Deactivate (lifecycle)",
                  "description": "Trigger events when the lifecycle component has been successfully deactivated and is in the configured state",
                  "$ref": "events.schema.json"
                },
                "on_cleanup": {
                  "title": "On Cleanup (lifecycle)",
                  "description": "Trigger events when the lifecycle component has been successfully cleaned up and is in the unconfigured state",
                  "$ref": "events.schema.json"
                },
                "on_shutdown": {
                  "title": "On Shutdown (lifecycle)",
                  "description": "Trigger events when the lifecycle component has been shut down and is in the finalized state",
                  "$ref": "events.schema.json"
                },
                "on_error": {
                  "title": "On Error (lifecycle)",
                  "description": "Trigger events when the lifecycle component has raised an error and is in the ErrorProcessing transition state",
                  "$ref": "events.schema.json"
                },
                "on_unload": {
                  "title": "On Unload",
                  "description": "Trigger events when the component is unloaded",
                  "$ref": "events.schema.json"
                }
              }
            },
            "predicates": {
              "type": "object",
              "title": "Component Predicates",
              "description": "Component predicates that can trigger events",
              "patternProperties": {
                "^[a-z][a-z0-9_]*[a-z0-9]$": {
                  "title": "Component Predicate",
                  "description": "A component-specific predicate",
                  "$ref": "events.schema.json"
                }
              }
            }
          }
        },
        "position": {
          "$ref": "common/position.schema.json"
        }
      }
    }
  }
}